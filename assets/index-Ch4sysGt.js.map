{"version":3,"file":"index-Ch4sysGt.js","sources":["../../src/logo.png","../../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__DacSPZ0B__\"","import './style.css'\r\nimport logoUrl from './logo.png'\r\n\r\n// Importar todos os JSONs de categorias\r\nimport analgesicosOpioides from './infos/json/Analgesicosopioides.json'\r\nimport antiHistaminico from './infos/json/anti-histaminico.json'\r\nimport antiInflamatorio from './infos/json/Anti-Inflamatorio.json'\r\nimport antiarritmicos from './infos/json/antiarritmicos.json'\r\nimport antibioticos from './infos/json/antibioticos.json'\r\nimport anticonvulsivantes from './infos/json/anticonvulsivantes.json'\r\nimport antiemeticos from './infos/json/antiemeticos.json'\r\nimport antifungicos from './infos/json/antifungicos.json'\r\nimport antiparasitarios from './infos/json/antiparasitarios_vermifugos.json'\r\nimport antiulcerosos from './infos/json/antiulcerosos.json'\r\nimport corticoesteroides from './infos/json/corticoesterioides.json'\r\nimport diureticos from './infos/json/diureticos.json'\r\nimport laxantesAntigases from './infos/json/laxantes_antigases.json'\r\nimport outros from './infos/json/outros.json'\r\nimport sistemaRespiratorio from './infos/json/sistema_respiratorio.json'\r\nimport vasodilatadores from './infos/json/vasodilatadores.json'\r\nimport vasopressores from './infos/json/vasopressores.json'\r\nimport vitaminas from './infos/json/vitaminas.json'\r\n\r\n// Mapeamento de categorias\r\nconst CATEGORIAS = {\r\n  'analgesicos-opioides': { nome: 'Analg√©sicos Opioides', dados: analgesicosOpioides },\r\n  'anti-histaminico': { nome: 'Anti-histam√≠nico', dados: antiHistaminico },\r\n  'anti-inflamatorio': { nome: 'Anti-inflamat√≥rio', dados: antiInflamatorio },\r\n  'antiarritmicos': { nome: 'Antiarr√≠tmicos', dados: antiarritmicos },\r\n  'antibioticos': { nome: 'Antibi√≥ticos', dados: antibioticos },\r\n  'anticonvulsivantes': { nome: 'Anticonvulsivantes', dados: anticonvulsivantes },\r\n  'antiemeticos': { nome: 'Antiem√©ticos', dados: antiemeticos },\r\n  'antifungicos': { nome: 'Antif√∫ngicos', dados: antifungicos },\r\n  'antiparasitarios': { nome: 'Antiparasit√°rios/Verm√≠fugos', dados: antiparasitarios },\r\n  'antiulcerosos': { nome: 'Antiulcerosos', dados: antiulcerosos },\r\n  'corticoesteroides': { nome: 'Corticoesteroides', dados: corticoesteroides },\r\n  'diureticos': { nome: 'Diur√©ticos', dados: diureticos },\r\n  'laxantes-antigases': { nome: 'Laxantes/Antigases', dados: laxantesAntigases },\r\n  'outros': { nome: 'Outros', dados: outros },\r\n  'sistema-respiratorio': { nome: 'Sistema Respirat√≥rio', dados: sistemaRespiratorio },\r\n  'vasodilatadores': { nome: 'Vasodilatadores', dados: vasodilatadores },\r\n  'vasopressores': { nome: 'Vasopressores', dados: vasopressores },\r\n  'vitaminas': { nome: 'Vitaminas', dados: vitaminas },\r\n}\r\n\r\nconst app = document.querySelector('#app')\r\n\r\n// Fun√ß√£o para verificar e aplicar tema salvo (padr√£o: claro)\r\nfunction aplicarTema() {\r\n  const temaSalvo = localStorage.getItem('tema')\r\n  const html = document.documentElement\r\n  \r\n  // Se n√£o tiver tema salvo ou for 'claro', garantir que est√° claro\r\n  if (!temaSalvo || temaSalvo === 'claro') {\r\n    html.classList.remove('dark')\r\n    localStorage.setItem('tema', 'claro')\r\n  } else if (temaSalvo === 'escuro') {\r\n    html.classList.add('dark')\r\n  }\r\n}\r\n\r\n// Aplicar tema imediatamente\r\naplicarTema()\r\n\r\n// Fun√ß√£o para alternar tema\r\nfunction alternarTema() {\r\n  const html = document.documentElement\r\n  const isDark = html.classList.contains('dark')\r\n  \r\n  if (isDark) {\r\n    html.classList.remove('dark')\r\n    localStorage.setItem('tema', 'claro')\r\n  } else {\r\n    html.classList.add('dark')\r\n    localStorage.setItem('tema', 'escuro')\r\n  }\r\n  \r\n  // Atualizar √≠cone ap√≥s mudan√ßa\r\n  atualizarIconeTema()\r\n}\r\n\r\n// Atualizar √≠cone do tema baseado no tema atual\r\nfunction atualizarIconeTema() {\r\n  const temaIcon = document.getElementById('temaIcon')\r\n  if (temaIcon) {\r\n    const isDark = document.documentElement.classList.contains('dark')\r\n    temaIcon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô'\r\n  }\r\n}\r\n\r\napp.innerHTML = `\r\n  <div id=\"splash\" class=\"fixed inset-0 z-50 flex items-center justify-center bg-pink-50 backdrop-blur-sm transition-opacity duration-700\">\r\n    <picture>\r\n      <img src=\"${logoUrl}\" alt=\"Logo\" class=\"block mx-auto w-auto h-auto max-w-[90vw] max-h-[75vh] object-contain\" />\r\n    </picture>\r\n  </div>\r\n  <header class=\"py-10\">\r\n    <div class=\"mx-auto max-w-2xl px-4 text-center\">\r\n      <img src=\"${logoUrl}\" alt=\"VetDose\" class=\"mx-auto h-16 w-auto\" />\r\n      <p class=\"mt-2 text-gray-600 dark:text-gray-300\">Calculadora de dosagem veterin√°ria</p>\r\n    </div>\r\n  </header>\r\n\r\n  <main class=\"mx-auto max-w-6xl px-4 pb-14\">\r\n    <div class=\"flex flex-col lg:flex-row gap-4 items-start\">\r\n      <section class=\"flex-1 rounded-xl bg-white dark:bg-gray-800/90 p-6 shadow-md dark:ring-gray-700 dark:ring-1\">\r\n        <div id=\"panel\"></div>\r\n      </section>\r\n      <div class=\"flex flex-row lg:flex-col gap-3 w-full lg:w-auto justify-center lg:justify-start\">\r\n        <button id=\"historicoBtn\" type=\"button\" aria-label=\"Ver hist√≥rico\" class=\"w-12 h-12 rounded-full bg-transparent transition-all cursor-pointer flex items-center justify-center\" title=\"Hist√≥rico de c√°lculos\">\r\n          <span class=\"text-xl text-gray-700 dark:text-gray-300\">üìã</span>\r\n        </button>\r\n        <button id=\"toggleTema\" type=\"button\" aria-label=\"Alternar tema\" class=\"w-12 h-12 rounded-full bg-transparent transition-all cursor-pointer flex items-center justify-center\">\r\n          <span id=\"temaIcon\" class=\"text-2xl text-gray-700 dark:text-gray-300\">üåô</span>\r\n        </button>\r\n        <button type=\"button\" id=\"resetForm\" aria-label=\"Limpar formul√°rio\" class=\"w-12 h-12 rounded-full bg-transparent transition-all cursor-pointer flex items-center justify-center\">\r\n          <span class=\"text-xl text-gray-700 dark:text-gray-300\">üîÑ</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </main>\r\n`\r\n\r\n// Configurar event listener para toggle de tema ap√≥s renderizar HTML\r\n// Aguardar um pouco para garantir que o DOM est√° pronto\r\nsetTimeout(() => {\r\n  const toggleTema = document.getElementById('toggleTema')\r\n  if (toggleTema) {\r\n    // Remover qualquer listener anterior\r\n    const novoBtn = toggleTema.cloneNode(true)\r\n    toggleTema.parentNode.replaceChild(novoBtn, toggleTema)\r\n    \r\n    // Adicionar listener no novo bot√£o\r\n    const btn = document.getElementById('toggleTema')\r\n    btn.onclick = function(e) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      alternarTema()\r\n    }\r\n    \r\n    atualizarIconeTema()\r\n  }\r\n  \r\n  // Bot√£o de hist√≥rico\r\n  const historicoBtn = document.getElementById('historicoBtn')\r\n  if (historicoBtn) {\r\n    historicoBtn.onclick = function(e) {\r\n      e.preventDefault()\r\n      mostrarHistorico()\r\n    }\r\n  }\r\n}, 200)\r\n\r\n// Fun√ß√£o para mostrar hist√≥rico\r\nfunction mostrarHistorico() {\r\n  const historico = getHistorico()\r\n  const panel = document.getElementById('panel')\r\n  \r\n  if (historico.length === 0) {\r\n    panel.innerHTML = `\r\n      <div class=\"mb-4\">\r\n        <h2 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Hist√≥rico de c√°lculos</h2>\r\n        <p class=\"mt-1 text-sm text-gray-600 dark:text-gray-400\">Nenhum c√°lculo salvo ainda.</p>\r\n        <button id=\"voltarHistorico\" class=\"mt-4 px-4 py-2 text-sm rounded-md bg-pink-500 dark:bg-pink-600 text-white hover:bg-pink-600 dark:hover:bg-pink-700 transition cursor-pointer\">‚Üê Voltar</button>\r\n      </div>\r\n    `\r\n    document.getElementById('voltarHistorico').onclick = () => renderForm()\r\n    return\r\n  }\r\n  \r\n  let html = `\r\n    <div class=\"mb-4 flex items-center justify-between\">\r\n      <h2 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Hist√≥rico de c√°lculos</h2>\r\n      <button id=\"limparHistorico\" class=\"px-3 py-1 text-xs rounded-md bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/50 transition cursor-pointer\">Limpar hist√≥rico</button>\r\n    </div>\r\n    <div class=\"space-y-3\">\r\n  `\r\n  \r\n  historico.forEach((item, idx) => {\r\n    const data = new Date(item.timestamp)\r\n    const especieLabel = ESPECIES.find(e => e.value === item.especie)?.label || item.especie\r\n    html += `\r\n      <div class=\"rounded-lg bg-gray-50 dark:bg-gray-700 p-4 border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition\" data-index=\"${idx}\">\r\n        <div class=\"flex items-start justify-between\">\r\n          <div class=\"flex-1\">\r\n            <div class=\"font-medium text-gray-900 dark:text-gray-100\">${item.med}</div>\r\n            <div class=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\r\n              ${especieLabel} ‚Ä¢ ${formatNumber(item.peso)} kg ‚Ä¢ ${formatNumber(item.doseMg)} mg\r\n            </div>\r\n            ${item.notas ? `<div class=\"text-xs text-gray-500 dark:text-gray-400 mt-1 italic\">${item.notas}</div>` : ''}\r\n            <div class=\"text-xs text-gray-400 dark:text-gray-500 mt-2\">${data.toLocaleString('pt-BR')}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `\r\n  })\r\n  \r\n  html += `\r\n    </div>\r\n    <button id=\"voltarHistorico\" class=\"mt-4 px-4 py-2 text-sm rounded-md bg-pink-500 dark:bg-pink-600 text-white hover:bg-pink-600 dark:hover:bg-pink-700 transition cursor-pointer\">‚Üê Voltar</button>\r\n  `\r\n  \r\n  panel.innerHTML = html\r\n  \r\n  // Event listeners\r\n  document.getElementById('voltarHistorico').onclick = () => renderForm()\r\n  document.getElementById('limparHistorico').onclick = () => {\r\n    if (confirm('Tem certeza que deseja limpar todo o hist√≥rico?')) {\r\n      limparHistorico()\r\n      mostrarHistorico()\r\n    }\r\n  }\r\n  \r\n  // Clicar em um item do hist√≥rico para reutilizar\r\n  panel.querySelectorAll('[data-index]').forEach(el => {\r\n    el.onclick = () => {\r\n      const idx = parseInt(el.dataset.index)\r\n      const item = historico[idx]\r\n      renderForm({\r\n        especie: item.especie,\r\n        categoria: item.categoria,\r\n        med: item.med.toLowerCase().replace(/[^a-z0-9]+/g, '-'),\r\n        pesoStr: formatNumber(item.peso),\r\n        concStr: item.concentracao ? formatNumber(item.concentracao) : '',\r\n        notas: item.notas || ''\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\n// Splash: aparece por 2 segundos e depois faz fade-out\r\nconst splashEl = document.getElementById('splash')\r\nsetTimeout(() => {\r\n  splashEl.classList.add('opacity-0')\r\n  setTimeout(() => {\r\n    splashEl.remove()\r\n  }, 700) // Aguarda o fade-out completar antes de remover\r\n}, 2000) // 2 segundos na tela\r\n\r\n// Tabelas de dosagem por esp√©cie (mg/kg) e metadados\r\n// Quando existe faixa, usamos o ponto m√©dio para o c√°lculo e exibimos a faixa.\r\nconst DOSAGENS = {\r\n  amoxicilina: {\r\n    cachorro: { min: 10, max: 20, freq: 'a cada 12h', dur: '5‚Äì7 dias', obs: 'Uso oral comum.' },\r\n    gato:     { min: 10, max: 20, freq: 'a cada 12h', dur: '5‚Äì7 dias', obs: 'Uso oral comum.' },\r\n  },\r\n  doxiciclina: {\r\n    cachorro: { min: 5, max: 10, freq: 'a cada 12h', dur: '7‚Äì10 dias', obs: 'Pode causar fotossensibilidade.' },\r\n    gato:     { min: 5, max: 10, freq: 'a cada 12h', dur: '7‚Äì10 dias', obs: 'Administrar com √°gua.' },\r\n  },\r\n  enrofloxacina: {\r\n    cachorro: { min: 5, max: 10, freq: 'a cada 24h', dur: '5‚Äì10 dias', obs: 'Evitar em animais jovens.' },\r\n  },\r\n  dipirona: {\r\n    cachorro: { min: 25, max: 25, freq: 'a cada 8h', dur: 'conforme necessidade', obs: 'Uso conforme orienta√ß√£o.' },\r\n    gato:     { min: 12, max: 12, freq: 'a cada 8h', dur: 'conforme necessidade', obs: 'Uso conforme orienta√ß√£o.' },\r\n  },\r\n  ivermectina: {\r\n    cachorro: { min: 0.2, max: 0.4, freq: 'dose √∫nica', dur: '‚Äî', obs: 'Aten√ß√£o ra√ßas sens√≠veis (MDR1).'},\r\n    gato:     { min: 0.2, max: 0.2, freq: 'dose √∫nica', dur: '‚Äî', obs: 'Aten√ß√£o a rea√ß√µes adversas.' },\r\n  },\r\n  cefalexina: {\r\n    cachorro: { min: 15, max: 30, freq: 'a cada 12h', dur: '7‚Äì14 dias', obs: 'Uso oral.' },\r\n    gato:     { min: 15, max: 30, freq: 'a cada 12h', dur: '7‚Äì14 dias', obs: 'Uso oral.' },\r\n  },\r\n  meloxicam: {\r\n    cachorro: { min: 0.2, max: 0.2, freq: '0,2 mg/kg inicial, 0,1 mg/kg manuten√ß√£o 1x/dia', dur: 'conforme orienta√ß√£o', obs: 'Anti-inflamat√≥rio n√£o esteroidal.' },\r\n  },\r\n  prednisona: {\r\n    cachorro: { min: 0.5, max: 2.0, freq: 'a cada 24h', dur: 'conforme indica√ß√£o', obs: 'Ajuste conforme quadro cl√≠nico.' },\r\n  },\r\n  furosemida: {\r\n    cachorro: { min: 2, max: 6, freq: 'a cada 8‚Äì12h', dur: 'conforme resposta', obs: 'Diur√©tico ‚Äî monitorar hidrata√ß√£o.' },\r\n  },\r\n}\r\n\r\nconst limitesPesoKg = { min: 0.1, max: 500 }\r\n\r\nconst ESPECIES = [\r\n  { value: 'cachorro', label: 'üê∂ Cachorro' },\r\n  { value: 'gato',     label: 'üê± Gato' },\r\n  { value: 'coelho',   label: 'üê∞ Coelho' },\r\n  { value: 'cavalo',   label: 'üê¥ Cavalo' },\r\n  { value: 'ave',      label: 'üïäÔ∏è Ave' },\r\n  { value: 'boi',      label: 'üêÆ Boi' },\r\n  { value: 'porco',    label: 'üê∑ Porco' },\r\n]\r\n\r\n// Concentra√ß√µes padr√£o para medica√ß√µes l√≠quidas (mg/mL) - valores mais comuns no mercado\r\nconst CONCENTRACOES_PADRAO = {\r\n  // Antibi√≥ticos\r\n  'amoxicilina': [50, 100, 250], // Suspens√£o oral comum: 250mg/5mL = 50mg/mL\r\n  'ampicilina': [100, 250, 500], // Frasco reconstitu√≠do\r\n  'cefalexina': [50, 100, 250], // Suspens√£o\r\n  'cefalotina': [100, 200], // Frasco 1g em 5mL = 200mg/mL\r\n  'cefovecina': [80], // Convenia\r\n  'clindamicina': [25, 50, 75], // Suspens√£o\r\n  'doxiciclina': [10, 25, 50], // Suspens√£o\r\n  'enrofloxacina': [25, 50, 100], // Injet√°vel comum: 50mg/mL\r\n  'penicilina': [200, 400], // 600.000 UI ‚âà 360mg, 1.200.000 UI ‚âà 720mg\r\n  \r\n  // Analg√©sicos\r\n  'butorfanol': [10],\r\n  'fentanil': [0.05], // 50mcg/mL = 0.05mg/mL\r\n  'hidromorfona': [2],\r\n  'metadona': [10],\r\n  'morfina': [1, 10], // 1mg/mL ou 10mg/mL\r\n  'tramadol': [20, 50], // 2% = 20mg/mL\r\n  \r\n  // Anti-inflamat√≥rios\r\n  'meloxicam': [1.5, 2, 5], // Comum: 1.5mg/mL ou 5mg/mL\r\n  'carprofeno': [20, 50], // Comum: 50mg/mL\r\n  'cetoprofeno': [50, 100], // Comum: 100mg/mL\r\n  'dipirona': [250, 500], // Comum: 500mg/mL\r\n  \r\n  // Diur√©ticos\r\n  'furosemida': [10, 50], // Comum: 10mg/mL ou 50mg/mL\r\n  \r\n  // Outros comuns\r\n  'dexametasona': [2, 4], // Comum: 2mg/mL\r\n  'prednisolona': [5, 10, 20], // Suspens√£o oral\r\n  'prednisona': [5, 10, 20], // Comprimidos mais comuns, mas pode ter l√≠quido\r\n  'ivermectina': [1, 10], // Comum: 1% = 10mg/mL\r\n}\r\n\r\n// Utilit√°rios globais\r\nfunction round2(n) {\r\n  return Math.round((n + Number.EPSILON) * 100) / 100\r\n}\r\n\r\nfunction formatNumber(n) {\r\n  return n.toLocaleString('pt-BR', { maximumFractionDigits: 2, minimumFractionDigits: 0 })\r\n}\r\n\r\nfunction getRegra(medicamento, especie) {\r\n  const mapa = DOSAGENS[medicamento]\r\n  if (!mapa) return null\r\n  return mapa[especie] || mapa['cachorro'] || mapa['gato'] || null\r\n}\r\n\r\n// Fun√ß√£o para parsear dose dos JSONs (ex: \"C√£es e Gatos - 11 a 22mg/kg\" ou \"C√£es - 5 a 10mg/kg Gato - 0,5 a 2mg/kg\" ou \"2 - 4- 8mg/kg\" ou \"2 a 5mcg/kg\")\r\nfunction parseDoseFromJSON(doseStr, especie) {\r\n  if (!doseStr) return null\r\n  \r\n  const especieMap = { \r\n    'cachorro': ['C√£es', 'C√£o', 'C√£o -', 'C√£es -'], \r\n    'gato': ['Gatos', 'Gato', 'Gato -', 'Gatos -'],\r\n    'coelho': ['Coelho', 'Coelhos'],\r\n    'cavalo': ['Cavalo', 'Cavalos'],\r\n    'ave': ['Ave', 'Aves'],\r\n    'boi': ['Boi', 'Bois'],\r\n    'porco': ['Porco', 'Porcos']\r\n  }\r\n  const especieTerms = especieMap[especie] || []\r\n  \r\n  // Fun√ß√£o auxiliar para converter unidades (mcg para mg: 1 mcg = 0.001 mg)\r\n  const converterUnidade = (valor, unidade) => {\r\n    if (unidade && unidade.toLowerCase().includes('mcg')) {\r\n      return valor * 0.001 // Converte mcg para mg\r\n    }\r\n    return valor\r\n  }\r\n  \r\n  // Primeiro, tentar encontrar dose espec√≠fica para a esp√©cie (ex: \"C√£es - 0,5 a 1mg/kg Gato - 0,5 a 2mg/kg\" ou \"C√£es - 2 a 5mcg/kg\")\r\n  if (especieTerms.length > 0) {\r\n    for (const term of especieTerms) {\r\n      const especieRegex = new RegExp(`${term.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\s*([^Gato|C√£o|Gatos|C√£es]*?)(?:Gato|C√£o|Gatos|C√£es|$)`, 'i')\r\n      const especieMatch = doseStr.match(especieRegex)\r\n      if (especieMatch && especieMatch[1]) {\r\n        const parteEspecie = especieMatch[1]\r\n        // Procurar faixa com mg/kg ou mcg/kg\r\n        const faixaRegex = /(\\d+(?:[.,]\\d+)?)\\s*(?:a|at√©|-)\\s*(\\d+(?:[.,]\\d+)?)\\s*(mcg|mg)\\/kg/i\r\n        const faixaMatch = parteEspecie.match(faixaRegex)\r\n        if (faixaMatch) {\r\n          const min = parseFloat(faixaMatch[1].replace(',', '.'))\r\n          const max = parseFloat(faixaMatch[2].replace(',', '.'))\r\n          const unidade = faixaMatch[3]\r\n          return { \r\n            min: converterUnidade(min, unidade), \r\n            max: converterUnidade(max, unidade) \r\n          }\r\n        }\r\n        // Tentar dose √∫nica com mg/kg ou mcg/kg\r\n        const singleRegex = /(\\d+(?:[.,]\\d+)?)\\s*(mcg|mg)\\/kg/i\r\n        const singleMatch = parteEspecie.match(singleRegex)\r\n        if (singleMatch) {\r\n          const val = parseFloat(singleMatch[1].replace(',', '.'))\r\n          const unidade = singleMatch[2]\r\n          const valorConvertido = converterUnidade(val, unidade)\r\n          return { min: valorConvertido, max: valorConvertido }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Se n√£o encontrou espec√≠fico, procurar padr√µes gerais com m√∫ltiplos valores (ex: \"2 - 4- 8mg/kg\" ou \"15 - 22 - 30mg/kg\")\r\n  const multiRegex = /(\\d+(?:[.,]\\d+)?)\\s*(?:-|a|at√©)\\s*(\\d+(?:[.,]\\d+)?)\\s*(?:-|a|at√©)?\\s*(\\d+(?:[.,]\\d+)?)?\\s*(mcg|mg)\\/kg/i\r\n  const multiMatch = doseStr.match(multiRegex)\r\n  \r\n  if (multiMatch) {\r\n    const values = []\r\n    const unidade = multiMatch[4] || 'mg'\r\n    if (multiMatch[1]) values.push(converterUnidade(parseFloat(multiMatch[1].replace(',', '.')), unidade))\r\n    if (multiMatch[2]) values.push(converterUnidade(parseFloat(multiMatch[2].replace(',', '.')), unidade))\r\n    if (multiMatch[3]) values.push(converterUnidade(parseFloat(multiMatch[3].replace(',', '.')), unidade))\r\n    \r\n    if (values.length > 0) {\r\n      const min = Math.min(...values)\r\n      const max = Math.max(...values)\r\n      return { min, max }\r\n    }\r\n  }\r\n  \r\n  // Procurar por padr√µes como \"11 a 22mg/kg\" ou \"5 a 10mg/kg\" ou \"2 a 5mcg/kg\"\r\n  const regex = /(\\d+(?:[.,]\\d+)?)\\s*(?:a|at√©|-)\\s*(\\d+(?:[.,]\\d+)?)\\s*(mcg|mg)\\/kg/i\r\n  const match = doseStr.match(regex)\r\n  \r\n  if (match) {\r\n    const min = parseFloat(match[1].replace(',', '.'))\r\n    const max = parseFloat(match[2].replace(',', '.'))\r\n    const unidade = match[3]\r\n    return { \r\n      min: converterUnidade(min, unidade), \r\n      max: converterUnidade(max, unidade) \r\n    }\r\n  }\r\n  \r\n  // Tentar dose √∫nica (ex: \"5mg/kg\" ou \"2mcg/kg\")\r\n  const singleRegex = /(\\d+(?:[.,]\\d+)?)\\s*(mcg|mg)\\/kg/i\r\n  const singleMatch = doseStr.match(singleRegex)\r\n  if (singleMatch) {\r\n    const val = parseFloat(singleMatch[1].replace(',', '.'))\r\n    const unidade = singleMatch[2]\r\n    const valorConvertido = converterUnidade(val, unidade)\r\n    return { min: valorConvertido, max: valorConvertido }\r\n  }\r\n  \r\n  return null\r\n}\r\n\r\n// Fun√ß√µes para gerenciar favoritos\r\nfunction getFavoritos() {\r\n  try {\r\n    return JSON.parse(localStorage.getItem('favoritos') || '[]')\r\n  } catch {\r\n    return []\r\n  }\r\n}\r\n\r\nfunction salvarFavorito(medicamento, categoria) {\r\n  const favoritos = getFavoritos()\r\n  const key = `${categoria}:${medicamento}`\r\n  if (!favoritos.includes(key)) {\r\n    favoritos.push(key)\r\n    localStorage.setItem('favoritos', JSON.stringify(favoritos))\r\n  }\r\n}\r\n\r\nfunction removerFavorito(medicamento, categoria) {\r\n  const favoritos = getFavoritos()\r\n  const key = `${categoria}:${medicamento}`\r\n  const index = favoritos.indexOf(key)\r\n  if (index > -1) {\r\n    favoritos.splice(index, 1)\r\n    localStorage.setItem('favoritos', JSON.stringify(favoritos))\r\n  }\r\n}\r\n\r\nfunction isFavorito(medicamento, categoria) {\r\n  const favoritos = getFavoritos()\r\n  return favoritos.includes(`${categoria}:${medicamento}`)\r\n}\r\n\r\n// Fun√ß√µes para gerenciar hist√≥rico\r\nfunction salvarHistorico(calculo) {\r\n  try {\r\n    const historico = JSON.parse(localStorage.getItem('historico') || '[]')\r\n    historico.unshift({\r\n      ...calculo,\r\n      timestamp: new Date().toISOString()\r\n    })\r\n    // Manter apenas os √∫ltimos 50 c√°lculos\r\n    const historicoLimitado = historico.slice(0, 50)\r\n    localStorage.setItem('historico', JSON.stringify(historicoLimitado))\r\n  } catch (e) {\r\n    console.error('Erro ao salvar hist√≥rico:', e)\r\n  }\r\n}\r\n\r\nfunction getHistorico() {\r\n  try {\r\n    return JSON.parse(localStorage.getItem('historico') || '[]')\r\n  } catch {\r\n    return []\r\n  }\r\n}\r\n\r\nfunction limparHistorico() {\r\n  localStorage.removeItem('historico')\r\n}\r\n\r\n// Fun√ß√£o para exportar PDF\r\nfunction exportarPDF(view) {\r\n  // Usar a API de impress√£o do navegador para gerar PDF\r\n  // Criar uma nova janela com o conte√∫do formatado\r\n  const especieLabel = ESPECIES.find(e => e.value === view.especie)?.label || view.especie\r\n  const temFaixa = view.doseMinKg !== view.doseMaxKg\r\n  \r\n  let html = `\r\n    <!DOCTYPE html>\r\n    <html>\r\n    <head>\r\n      <meta charset=\"UTF-8\">\r\n      <title>VetDose - ${view.med}</title>\r\n      <style>\r\n        body { font-family: Arial, sans-serif; padding: 20px; color: #000; }\r\n        h1 { color: #ec4899; margin-bottom: 10px; }\r\n        .info { margin: 10px 0; }\r\n        .dose-box { border: 2px solid #10b981; padding: 15px; margin: 15px 0; border-radius: 8px; background: #f0fdf4; }\r\n        .dose-value { font-size: 24px; font-weight: bold; color: #059669; }\r\n        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 15px 0; }\r\n        .item { padding: 8px; background: #f9fafb; border-radius: 4px; }\r\n        .label { font-size: 12px; color: #6b7280; }\r\n        .value { font-weight: bold; }\r\n        @media print { body { padding: 0; } }\r\n      </style>\r\n    </head>\r\n    <body>\r\n      <h1>VetDose - Calculadora de Dosagem Veterin√°ria</h1>\r\n      <div class=\"info\"><strong>Esp√©cie:</strong> ${especieLabel}</div>\r\n      <div class=\"info\"><strong>Medicamento:</strong> ${view.med}</div>\r\n      <div class=\"info\"><strong>Peso:</strong> ${formatNumber(view.peso)} kg</div>\r\n      <div class=\"info\"><strong>Dosagem de refer√™ncia:</strong> ${view.faixaStr}</div>\r\n      \r\n      <div class=\"dose-box\">\r\n        <div class=\"label\">Dose Calculada</div>\r\n        <div class=\"dose-value\">${view.doseMg} mg</div>\r\n        ${view.volumeMl ? `<div style=\"margin-top: 5px;\">${view.volumeMl} mL</div>` : ''}\r\n        ${view.comprimidos ? `<div style=\"margin-top: 5px;\">${view.comprimidos} comprimido(s)</div>` : ''}\r\n      </div>\r\n      \r\n      ${temFaixa ? `\r\n      <div style=\"margin: 15px 0;\">\r\n        <div style=\"display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;\">\r\n          <div style=\"padding: 10px; background: #fef2f2; border: 1px solid #fecaca; border-radius: 4px;\">\r\n            <div class=\"label\">M√≠nimo</div>\r\n            <div class=\"value\">${view.doseMinMg} mg</div>\r\n            ${view.volumeMinMl ? `<div style=\"font-size: 12px;\">${view.volumeMinMl} mL</div>` : ''}\r\n          </div>\r\n          <div style=\"padding: 10px; background: #f0fdf4; border: 2px solid #10b981; border-radius: 4px;\">\r\n            <div class=\"label\">Calculado</div>\r\n            <div class=\"value\">${view.doseMg} mg</div>\r\n            ${view.volumeMl ? `<div style=\"font-size: 12px;\">${view.volumeMl} mL</div>` : ''}\r\n          </div>\r\n          <div style=\"padding: 10px; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 4px;\">\r\n            <div class=\"label\">M√°ximo</div>\r\n            <div class=\"value\">${view.doseMaxMg} mg</div>\r\n            ${view.volumeMaxMl ? `<div style=\"font-size: 12px;\">${view.volumeMaxMl} mL</div>` : ''}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      ` : ''}\r\n      \r\n      <div class=\"grid\">\r\n        ${view.concentracao ? `<div class=\"item\"><div class=\"label\">Concentra√ß√£o</div><div class=\"value\">${view.concentracao} ${view.isComprimido ? 'mg/comprimido' : 'mg/mL'}</div></div>` : ''}\r\n        ${view.via ? `<div class=\"item\"><div class=\"label\">Via</div><div class=\"value\">${view.via}</div></div>` : ''}\r\n        <div class=\"item\"><div class=\"label\">Frequ√™ncia</div><div class=\"value\">${view.freq}</div></div>\r\n        <div class=\"item\"><div class=\"label\">Dura√ß√£o</div><div class=\"value\">${view.dur}</div></div>\r\n      </div>\r\n      \r\n      ${view.notas ? `<div style=\"margin-top: 15px; padding: 10px; background: #faf5ff; border: 1px solid #d8b4fe; border-radius: 4px;\">\r\n        <div class=\"label\">Notas pessoais</div>\r\n        <div>${view.notas}</div>\r\n      </div>` : ''}\r\n      \r\n      ${view.alerta ? `<div style=\"margin-top: 15px; padding: 10px; background: #fffbeb; border: 1px solid #fcd34d; border-radius: 4px; color: #92400e;\">\r\n        ‚ö†Ô∏è ${view.alerta}\r\n      </div>` : ''}\r\n      \r\n      <div style=\"margin-top: 30px; font-size: 12px; color: #6b7280; text-align: center;\">\r\n        Gerado em ${new Date().toLocaleString('pt-BR')} por VetDose\r\n      </div>\r\n    </body>\r\n    </html>\r\n  `\r\n  \r\n  const win = window.open('', '_blank')\r\n  win.document.write(html)\r\n  win.document.close()\r\n  setTimeout(() => {\r\n    win.print()\r\n  }, 250)\r\n}\r\n\r\nfunction renderForm(initial = {}) {\r\n  const panel = document.getElementById('panel')\r\n  const especie = initial.especie || 'cachorro'\r\n  const pesoStr = initial.pesoStr || ''\r\n  const categoria = initial.categoria || ''\r\n  const med = initial.med || ''\r\n  const concStr = initial.concStr || ''\r\n  const sensivel = Boolean(initial.sensivel)\r\n  const notas = initial.notas || ''\r\n\r\n  // Gerar op√ß√µes de categorias\r\n  const categoriasOptions = Object.entries(CATEGORIAS).map(([key, cat]) => \r\n    `<option value=\"${key}\" ${categoria===key?'selected':''}>${cat.nome}</option>`\r\n  ).join('')\r\n\r\n  panel.innerHTML = `\r\n      <div class=\"mb-4\">\r\n        <h2 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Calcular dosagem</h2>\r\n        <p class=\"mt-1 text-sm text-gray-600 dark:text-gray-400\">Selecione a categoria, esp√©cie, informe o peso, o medicamento e, opcionalmente, a concentra√ß√£o.</p>\r\n      </div>\r\n\r\n      <form id=\"dose-form\" class=\"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n        <div class=\"sm:col-span-2\">\r\n          <label for=\"animal\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Esp√©cie</label>\r\n          <select id=\"animal\" class=\"mt-1 w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-gray-100 shadow-sm focus:border-pink-500 dark:focus:border-pink-400 focus:outline-none focus:ring-2 focus:ring-pink-500/20 dark:focus:ring-pink-400/20\">\r\n            ${ESPECIES.map(s => `<option value=\"${s.value}\" ${s.value===especie?'selected':''}>${s.label}</option>`).join('')}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"categoria\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Categoria</label>\r\n          <select id=\"categoria\" class=\"mt-1 w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-gray-100 shadow-sm focus:border-pink-500 dark:focus:border-pink-400 focus:outline-none focus:ring-2 focus:ring-pink-500/20 dark:focus:ring-pink-400/20\">\r\n            <option value=\"\">Selecione uma categoria</option>\r\n            ${categoriasOptions}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <div class=\"flex items-center justify-between\">\r\n            <label for=\"medicamento\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Medicamento</label>\r\n            <button type=\"button\" id=\"toggleFavoritos\" class=\"text-xs text-pink-600 dark:text-pink-400 hover:text-pink-700 dark:hover:text-pink-300 cursor-pointer hidden\" title=\"Mostrar apenas favoritos\">‚≠ê Favoritos</button>\r\n          </div>\r\n          <div class=\"mt-1 relative\">\r\n            <input type=\"text\" id=\"buscaMedicamento\" placeholder=\"Buscar medicamento...\" class=\"w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-gray-100 shadow-sm focus:border-pink-500 dark:focus:border-pink-400 focus:outline-none focus:ring-2 focus:ring-pink-500/20 dark:focus:ring-pink-400/20\" ${!categoria ? 'disabled' : ''} />\r\n            <select id=\"medicamento\" class=\"mt-1 w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-gray-100 shadow-sm focus:border-pink-500 dark:focus:border-pink-400 focus:outline-none focus:ring-2 focus:ring-pink-500/20 dark:focus:ring-pink-400/20 hidden\" ${!categoria ? 'disabled' : ''}>\r\n              <option value=\"\">Selecione uma categoria</option>\r\n            </select>\r\n            <div id=\"medicamento-lista\" class=\"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto hidden\"></div>\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"peso\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Peso <span class=\"text-gray-400 dark:text-gray-500 font-normal\">(kg)</span></label>\r\n          <div class=\"relative mt-1\">\r\n            <span class=\"pointer-events-none absolute inset-y-0 left-3 flex items-center text-gray-500 dark:text-gray-400\">kg</span>\r\n            <input id=\"peso\" inputmode=\"numeric\" autocomplete=\"off\" placeholder=\"0,00\" value=\"${pesoStr}\"\r\n              aria-label=\"Peso do animal em quilogramas\"\r\n              class=\"w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 pl-10 pr-3 py-2 text-gray-900 dark:text-gray-100 shadow-sm focus:border-pink-500 dark:focus:border-pink-400 focus:outline-none focus:ring-2 focus:ring-pink-500/20 dark:focus:ring-pink-400/20\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"concentracao\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Concentra√ß√£o <span class=\"text-gray-400 dark:text-gray-500 font-normal\">(mg/mL)</span></label>\r\n          <div id=\"concentracao-container\" class=\"mt-1\">\r\n            <input id=\"concentracao\" inputmode=\"decimal\" placeholder=\"Ex.: 250\" value=\"${concStr}\" \r\n              aria-label=\"Concentra√ß√£o do medicamento em miligramas por mililitro\"\r\n              class=\"w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-gray-900 dark:text-gray-100 shadow-sm focus:border-pink-500 dark:focus:border-pink-400 focus:outline-none focus:ring-2 focus:ring-pink-500/20 dark:focus:ring-pink-400/20\" />\r\n            <div id=\"concentracao-opcoes\" class=\"mt-2 hidden\" role=\"group\" aria-label=\"Concentra√ß√µes comuns dispon√≠veis\">\r\n              <div class=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">Concentra√ß√µes comuns (clique para selecionar):</div>\r\n              <div class=\"flex flex-wrap gap-2\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"flex items-center gap-2 sm:col-span-2\">\r\n          <input id=\"racaSensivel\" type=\"checkbox\" ${sensivel?'checked':''} class=\"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-pink-600 dark:text-pink-400 focus:ring-pink-600 dark:focus:ring-pink-400 bg-white dark:bg-gray-700\" />\r\n          <label for=\"racaSensivel\" class=\"text-sm text-gray-700 dark:text-gray-300\">Ra√ßa sens√≠vel (Collie/Sheltie) ‚Äî alerta para Ivermectina</label>\r\n        </div>\r\n\r\n        <div class=\"sm:col-span-2\">\r\n          <label for=\"notas\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Notas pessoais <span class=\"text-gray-400 dark:text-gray-500 font-normal\">(opcional)</span></label>\r\n          <textarea id=\"notas\" rows=\"2\" placeholder=\"Adicione observa√ß√µes ou notas sobre este c√°lculo...\" class=\"mt-1 w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 shadow-sm focus:border-pink-500 dark:focus:border-pink-400 focus:outline-none focus:ring-2 focus:ring-pink-500/20 dark:focus:ring-pink-400/20 resize-none\"></textarea>\r\n        </div>\r\n\r\n        <div class=\"sm:col-span-2 mt-2\">\r\n          <button type=\"submit\" aria-label=\"Calcular dosagem do medicamento\" class=\"inline-flex w-full items-center justify-center rounded-md bg-pink-500 dark:bg-pink-600 px-4 py-2 text-white font-medium shadow-sm transition hover:bg-pink-600 dark:hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-500/30 dark:focus:ring-pink-400/30 cursor-pointer\">Calcular dose</button>\r\n        </div>\r\n      </form>\r\n\r\n      <div id=\"alert\" class=\"mt-4 hidden rounded-md border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/30 px-4 py-3 text-sm text-red-700 dark:text-red-300\"></div>\r\n  `\r\n\r\n  const form = document.getElementById('dose-form')\r\n  const categoriaSelect = document.getElementById('categoria')\r\n  const especieSelect = document.getElementById('animal')\r\n  const pesoInput = document.getElementById('peso')\r\n  const medicamentoSelect = document.getElementById('medicamento')\r\n  const buscaMedicamento = document.getElementById('buscaMedicamento')\r\n  const medicamentoLista = document.getElementById('medicamento-lista')\r\n  const toggleFavoritos = document.getElementById('toggleFavoritos')\r\n  const concentracaoInput = document.getElementById('concentracao')\r\n  const racaSensivel = document.getElementById('racaSensivel')\r\n  const notasInput = document.getElementById('notas')\r\n  const alertBox = document.getElementById('alert')\r\n  \r\n  // Restaurar notas se houver\r\n  if (notasInput && notas) {\r\n    notasInput.value = notas\r\n  }\r\n  \r\n  // Vari√°vel para controlar se est√° mostrando apenas favoritos\r\n  let mostrarApenasFavoritos = false\r\n  let medicamentosAtuais = []\r\n\r\n  // Fun√ß√£o para extrair concentra√ß√£o do JSON (ex: \"500mg/mL\" ou \"Comprimidos 50mg\")\r\n  function extrairConcentracao(concStr) {\r\n    if (!concStr) return null\r\n    // Procurar por padr√µes como \"500mg/mL\", \"50mg/mL\", \"250 mg/5 mL\"\r\n    const regex = /(\\d+(?:[.,]\\d+)?)\\s*mg\\s*\\/\\s*(\\d+(?:[.,]\\d+)?)?\\s*mL/i\r\n    const match = concStr.match(regex)\r\n    if (match) {\r\n      const mg = parseFloat(match[1].replace(',', '.'))\r\n      const ml = match[2] ? parseFloat(match[2].replace(',', '.')) : 1\r\n      return round2(mg / ml) // Retorna mg/mL\r\n    }\r\n    // Procurar por comprimidos (ex: \"Comprimidos 50mg\")\r\n    const compRegex = /(?:comp|comprimido|cp)[\\s:]*(\\d+(?:[.,]\\d+)?)\\s*mg/i\r\n    const compMatch = concStr.match(compRegex)\r\n    if (compMatch) {\r\n      return parseFloat(compMatch[1].replace(',', '.'))\r\n    }\r\n    return null\r\n  }\r\n\r\n  // Fun√ß√£o para detectar se √© medica√ß√£o l√≠quida baseado na via\r\n  function isLiquido(via) {\r\n    if (!via) return false\r\n    const viasLiquidas = ['IV', 'IM', 'SC', 'VO', 'INJET√ÅVEL', 'INJETAVEL', 'SOLU√á√ÉO', 'SUSPENS√ÉO', 'SUSPENSAO']\r\n    return viasLiquidas.some(v => via.toUpperCase().includes(v))\r\n  }\r\n\r\n  // Fun√ß√£o para obter concentra√ß√µes padr√£o de um medicamento\r\n  function getConcentracoesPadrao(nomeMed) {\r\n    if (!nomeMed) return null\r\n    const nomeLower = nomeMed.toLowerCase()\r\n    // Procurar por nome exato ou parcial\r\n    for (const [key, valores] of Object.entries(CONCENTRACOES_PADRAO)) {\r\n      if (nomeLower.includes(key)) {\r\n        return valores\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  // Fun√ß√£o para atualizar medicamentos baseado na categoria\r\n  // Guarda a concentra√ß√£o atual para n√£o perder ao trocar categoria\r\n  function atualizarMedicamentos() {\r\n    const categoriaKey = categoriaSelect.value\r\n    const concAtual = concentracaoInput.value // Guardar concentra√ß√£o atual\r\n    const medAtual = medicamentoSelect.value // Guardar medicamento atual\r\n    medicamentoSelect.innerHTML = '<option value=\"\">Selecione uma categoria</option>'\r\n    medicamentoSelect.disabled = !categoriaKey\r\n    buscaMedicamento.disabled = !categoriaKey\r\n    buscaMedicamento.value = ''\r\n    medicamentoLista.classList.add('hidden')\r\n    // S√≥ limpar concentra√ß√£o se realmente mudou de categoria (n√£o quando est√° restaurando)\r\n    const categoriaAnterior = categoria || ''\r\n    if (!categoriaAnterior || categoriaAnterior !== categoriaKey) {\r\n      // Mudou de categoria, limpar concentra√ß√£o\r\n      concentracaoInput.value = ''\r\n    } else if (concStr) {\r\n      // Est√° restaurando, manter concentra√ß√£o salva\r\n      concentracaoInput.value = concStr\r\n    }\r\n\r\n    if (categoriaKey && CATEGORIAS[categoriaKey]) {\r\n      const medicamentos = CATEGORIAS[categoriaKey].dados\r\n      medicamentosAtuais = medicamentos.map((medItem, idx) => {\r\n        const nome = medItem.Medicamento || medItem.medicamento || `Medicamento ${idx + 1}`\r\n        const value = nome.toLowerCase().replace(/[^a-z0-9]+/g, '-')\r\n        return { nome, value, medData: medItem }\r\n      })\r\n      \r\n      // Atualizar select oculto\r\n      medicamentosAtuais.forEach(item => {\r\n        medicamentoSelect.innerHTML += `<option value=\"${item.value}\" data-med-data='${JSON.stringify(item.medData)}'>${item.nome}</option>`\r\n      })\r\n      \r\n      // Mostrar bot√£o de favoritos se houver favoritos nesta categoria\r\n      const favoritos = getFavoritos()\r\n      const temFavoritos = favoritos.some(f => f.startsWith(`${categoriaKey}:`))\r\n      if (temFavoritos) {\r\n        toggleFavoritos.classList.remove('hidden')\r\n      } else {\r\n        toggleFavoritos.classList.add('hidden')\r\n      }\r\n    } else {\r\n      medicamentosAtuais = []\r\n      toggleFavoritos.classList.add('hidden')\r\n    }\r\n  }\r\n  \r\n  // Fun√ß√£o para buscar e filtrar medicamentos\r\n  function buscarMedicamentos(termo) {\r\n    if (!categoriaSelect.value) return\r\n    \r\n    let medicamentosFiltrados = medicamentosAtuais\r\n    \r\n    // Filtrar por favoritos se estiver ativo\r\n    if (mostrarApenasFavoritos) {\r\n      const favoritos = getFavoritos()\r\n      const categoriaKey = categoriaSelect.value\r\n      medicamentosFiltrados = medicamentosFiltrados.filter(item => {\r\n        const key = `${categoriaKey}:${item.value}`\r\n        return favoritos.includes(key)\r\n      })\r\n    }\r\n    \r\n    // Filtrar por termo de busca\r\n    if (termo && termo.trim()) {\r\n      const termoLower = termo.toLowerCase()\r\n      medicamentosFiltrados = medicamentosFiltrados.filter(item => \r\n        item.nome.toLowerCase().includes(termoLower)\r\n      )\r\n    }\r\n    \r\n    // Renderizar lista\r\n    if (medicamentosFiltrados.length === 0) {\r\n      medicamentoLista.innerHTML = '<div class=\"px-3 py-2 text-sm text-gray-500 dark:text-gray-400\">Nenhum medicamento encontrado</div>'\r\n      medicamentoLista.classList.remove('hidden')\r\n      return\r\n    }\r\n    \r\n    // Separar favoritos e n√£o-favoritos\r\n    const favoritos = getFavoritos()\r\n    const categoriaKey = categoriaSelect.value\r\n    const medicamentosFavoritos = []\r\n    const medicamentosNaoFavoritos = []\r\n    \r\n    medicamentosFiltrados.forEach(item => {\r\n      const key = `${categoriaKey}:${item.value}`\r\n      if (favoritos.includes(key)) {\r\n        medicamentosFavoritos.push(item)\r\n      } else {\r\n        medicamentosNaoFavoritos.push(item)\r\n      }\r\n    })\r\n    \r\n    // Ordenar alfabeticamente cada grupo\r\n    medicamentosFavoritos.sort((a, b) => a.nome.localeCompare(b.nome, 'pt-BR'))\r\n    medicamentosNaoFavoritos.sort((a, b) => a.nome.localeCompare(b.nome, 'pt-BR'))\r\n    \r\n    // Combinar: favoritos primeiro, depois n√£o-favoritos\r\n    const medicamentosOrdenados = [...medicamentosFavoritos, ...medicamentosNaoFavoritos]\r\n    \r\n    medicamentoLista.innerHTML = ''\r\n    medicamentosOrdenados.forEach(item => {\r\n      const favorito = isFavorito(item.value, categoriaSelect.value)\r\n      const div = document.createElement('div')\r\n      div.className = 'px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer flex items-center justify-between'\r\n      div.innerHTML = `\r\n        <span class=\"text-sm text-gray-900 dark:text-gray-100\">${item.nome}</span>\r\n        <button type=\"button\" class=\"favorito-btn text-lg ${favorito ? 'text-yellow-500' : 'text-gray-400'} hover:text-yellow-500 transition\" data-med=\"${item.value}\" title=\"${favorito ? 'Remover dos favoritos' : 'Adicionar aos favoritos'}\">\r\n          ${favorito ? '‚≠ê' : '‚òÜ'}\r\n        </button>\r\n      `\r\n      div.onclick = (e) => {\r\n        if (e.target.closest('.favorito-btn')) {\r\n          e.stopPropagation()\r\n          const btn = e.target.closest('.favorito-btn')\r\n          const medValue = btn.dataset.med\r\n          if (isFavorito(medValue, categoriaSelect.value)) {\r\n            removerFavorito(medValue, categoriaSelect.value)\r\n          } else {\r\n            salvarFavorito(medValue, categoriaSelect.value)\r\n          }\r\n          // Atualizar a lista para reordenar (favoritos no topo)\r\n          buscarMedicamentos(buscaMedicamento.value || '')\r\n          return\r\n        }\r\n        // Selecionar medicamento\r\n        medicamentoSelect.value = item.value\r\n        buscaMedicamento.value = item.nome\r\n        medicamentoLista.classList.add('hidden')\r\n        medicamentoSelect.dispatchEvent(new Event('change'))\r\n      }\r\n      medicamentoLista.appendChild(div)\r\n    })\r\n    \r\n    // Mostrar lista se houver medicamentos filtrados (mesmo sem termo de busca)\r\n    // A lista aparece quando h√° categoria selecionada, independente de ter termo ou n√£o\r\n    if (medicamentosFiltrados.length > 0 && categoriaSelect.value) {\r\n      medicamentoLista.classList.remove('hidden')\r\n    } else {\r\n      medicamentoLista.classList.add('hidden')\r\n    }\r\n  }\r\n  \r\n  // Event listeners para busca\r\n  buscaMedicamento.addEventListener('input', (e) => {\r\n    buscarMedicamentos(e.target.value)\r\n  })\r\n  \r\n  buscaMedicamento.addEventListener('focus', () => {\r\n    // Mostrar todos os medicamentos da categoria quando focar, mesmo sem digitar\r\n    if (categoriaSelect.value) {\r\n      buscarMedicamentos(buscaMedicamento.value || '')\r\n    }\r\n  })\r\n  \r\n  // Fechar lista ao clicar fora\r\n  document.addEventListener('click', (e) => {\r\n    if (!buscaMedicamento.contains(e.target) && !medicamentoLista.contains(e.target)) {\r\n      medicamentoLista.classList.add('hidden')\r\n    }\r\n  })\r\n  \r\n  // Toggle favoritos\r\n  toggleFavoritos.addEventListener('click', () => {\r\n    mostrarApenasFavoritos = !mostrarApenasFavoritos\r\n    toggleFavoritos.textContent = mostrarApenasFavoritos ? 'üìã Todos' : '‚≠ê Favoritos'\r\n    buscarMedicamentos(buscaMedicamento.value)\r\n  })\r\n\r\n  // Quando medicamento for selecionado, preencher concentra√ß√£o automaticamente APENAS se estiver no JSON\r\n  // Mas s√≥ limpar se realmente mudou de medicamento (n√£o quando est√° restaurando)\r\n  let medicamentoAnterior = medicamentoSelect.value || med || ''\r\n  medicamentoSelect.addEventListener('change', () => {\r\n    const medOption = medicamentoSelect.options[medicamentoSelect.selectedIndex]\r\n    const opcoesContainer = document.getElementById('concentracao-opcoes')\r\n    opcoesContainer.innerHTML = ''\r\n    opcoesContainer.classList.add('hidden')\r\n    \r\n    // S√≥ limpar concentra√ß√£o se realmente mudou de medicamento E n√£o tinha concentra√ß√£o salva\r\n    const medAtual = medicamentoSelect.value\r\n    const tinhaConcSalva = concStr && concStr.trim() !== ''\r\n    const mesmoMedicamento = medAtual === med\r\n    \r\n    // Se mudou de medicamento E n√£o est√° restaurando o mesmo, limpar\r\n    if (medicamentoAnterior !== medAtual && !(mesmoMedicamento && tinhaConcSalva)) {\r\n      concentracaoInput.value = ''\r\n    }\r\n    // Se est√° restaurando o mesmo medicamento e tinha concentra√ß√£o, manter\r\n    else if (mesmoMedicamento && tinhaConcSalva) {\r\n      concentracaoInput.value = concStr\r\n    }\r\n    \r\n    medicamentoAnterior = medAtual\r\n    \r\n    if (medOption?.dataset?.medData) {\r\n      const medData = JSON.parse(medOption.dataset.medData)\r\n      const nomeMed = medData.Medicamento || ''\r\n      const via = medData.Via || ''\r\n      \r\n      // Se j√° tem concentra√ß√£o informada, n√£o sobrescrever\r\n      if (concentracaoInput.value && concentracaoInput.value.trim() !== '') {\r\n        // Manter a concentra√ß√£o que j√° estava\r\n        return\r\n      }\r\n      \r\n      // Tentar extrair do JSON - S√ì preencher se encontrar informa√ß√£o v√°lida\r\n      if (medData.Concentracao_mg_mL) {\r\n        const concExtraida = extrairConcentracao(medData.Concentracao_mg_mL)\r\n        if (concExtraida && concExtraida > 0) {\r\n          // S√≥ preencher se conseguiu extrair uma concentra√ß√£o v√°lida do JSON\r\n          concentracaoInput.value = formatNumber(concExtraida)\r\n        } else {\r\n          // Se n√£o conseguiu extrair, mas √© l√≠quido, mostrar op√ß√µes como sugest√£o (SEM preencher)\r\n          if (isLiquido(via)) {\r\n            const concPadrao = getConcentracoesPadrao(nomeMed)\r\n            if (concPadrao && concPadrao.length > 0) {\r\n              opcoesContainer.classList.remove('hidden')\r\n              const buttonsContainer = opcoesContainer.querySelector('div')\r\n              buttonsContainer.innerHTML = ''\r\n              concPadrao.forEach(conc => {\r\n                const btn = document.createElement('button')\r\n                btn.type = 'button'\r\n                btn.className = 'px-3 py-1 text-xs rounded-md bg-pink-100 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300 hover:bg-pink-200 dark:hover:bg-pink-900/50 transition cursor-pointer'\r\n                btn.textContent = `${formatNumber(conc)} mg/mL`\r\n                btn.onclick = () => {\r\n                  concentracaoInput.value = formatNumber(conc)\r\n                  opcoesContainer.classList.add('hidden')\r\n                }\r\n                buttonsContainer.appendChild(btn)\r\n              })\r\n              // N√ÉO preencher automaticamente - apenas mostrar op√ß√µes\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        // Se n√£o tem concentra√ß√£o no JSON e √© l√≠quido, mostrar op√ß√µes como sugest√£o (SEM preencher)\r\n        if (isLiquido(via)) {\r\n          const concPadrao = getConcentracoesPadrao(nomeMed)\r\n          if (concPadrao && concPadrao.length > 0) {\r\n            opcoesContainer.classList.remove('hidden')\r\n            const buttonsContainer = opcoesContainer.querySelector('div')\r\n            buttonsContainer.innerHTML = ''\r\n            concPadrao.forEach(conc => {\r\n              const btn = document.createElement('button')\r\n              btn.type = 'button'\r\n              btn.className = 'px-3 py-1 text-xs rounded-md bg-pink-100 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300 hover:bg-pink-200 dark:hover:bg-pink-900/50 transition cursor-pointer'\r\n              btn.textContent = `${formatNumber(conc)} mg/mL`\r\n              btn.onclick = () => {\r\n                concentracaoInput.value = formatNumber(conc)\r\n                opcoesContainer.classList.add('hidden')\r\n              }\r\n              buttonsContainer.appendChild(btn)\r\n            })\r\n            // N√ÉO preencher automaticamente - apenas mostrar op√ß√µes\r\n          }\r\n        }\r\n      }\r\n    }\r\n  })\r\n\r\n  // Se j√° tinha categoria selecionada, atualizar medicamentos\r\n  if (categoria) {\r\n    atualizarMedicamentos()\r\n    if (med) {\r\n      medicamentoSelect.value = med\r\n    }\r\n  }\r\n\r\n  categoriaSelect.addEventListener('change', atualizarMedicamentos)\r\n\r\n  // Bot√£o de reset (agora est√° fora do card)\r\n  const resetBtn = document.getElementById('resetForm')\r\n  if (resetBtn) {\r\n    resetBtn.addEventListener('click', () => {\r\n      especieSelect.value = 'cachorro'\r\n      categoriaSelect.value = ''\r\n      medicamentoSelect.innerHTML = '<option value=\"\">Selecione uma categoria</option>'\r\n      medicamentoSelect.disabled = true\r\n      pesoInput.value = ''\r\n      concentracaoInput.value = ''\r\n      racaSensivel.checked = false\r\n      alertBox.classList.add('hidden')\r\n      alertBox.textContent = ''\r\n      const opcoesContainer = document.getElementById('concentracao-opcoes')\r\n      if (opcoesContainer) {\r\n        opcoesContainer.innerHTML = ''\r\n        opcoesContainer.classList.add('hidden')\r\n      }\r\n    })\r\n  }\r\n\r\n  function maskDecimal(el) {\r\n    el.addEventListener('input', () => {\r\n      let s = el.value\r\n      s = s.replace(/[^\\d,\\.]/g, '')\r\n      s = s.replace(/\\./g, '')\r\n      if (s.indexOf(',') !== -1) {\r\n        const [int, dec] = s.split(',')\r\n        const intFmt = int.replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.')\r\n        el.value = dec !== undefined ? `${intFmt},${dec.replace(/[^\\d]/g,'').slice(0,2)}` : intFmt\r\n      } else {\r\n        const intFmt = s.replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.')\r\n        el.value = intFmt\r\n      }\r\n    })\r\n  }\r\n\r\n  // M√°scara de 2 casas decimais autom√°tica (ex.: 1250 -> 12,50)\r\n  function maskTwoDecimals(el) {\r\n    const format = (digits) => {\r\n      if (!digits) return ''\r\n      // remove zeros √† esquerda\r\n      digits = digits.replace(/^0+(\\d)/, '$1')\r\n      if (digits.length === 1) digits = '0' + digits\r\n      const intPart = digits.slice(0, -2) || '0'\r\n      const decPart = digits.slice(-2)\r\n      const intFmt = intPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.')\r\n      return `${intFmt},${decPart}`\r\n    }\r\n    const handler = () => {\r\n      let s = el.value.replace(/\\D/g, '')\r\n      el.value = format(s)\r\n    }\r\n    el.addEventListener('input', handler)\r\n    el.addEventListener('focus', handler)\r\n  }\r\n\r\n  maskTwoDecimals(pesoInput)\r\n  maskDecimal(concentracaoInput)\r\n\r\n  function parsePtBrNumber(str) {\r\n    if (!str) return NaN\r\n    return Number(str.replace(/\\./g,'').replace(',', '.'))\r\n  }\r\n\r\n  function showAlert(message) {\r\n    alertBox.textContent = message\r\n    alertBox.classList.remove('hidden')\r\n  }\r\n\r\n  form.addEventListener('submit', async (e) => {\r\n    e.preventDefault()\r\n    const submitBtn = form.querySelector('button[type=\"submit\"]')\r\n    const originalText = submitBtn.innerHTML\r\n    \r\n    // Loading state\r\n    submitBtn.disabled = true\r\n    submitBtn.innerHTML = '<span class=\"inline-block animate-spin mr-2\">‚è≥</span> Calculando...'\r\n    \r\n    // Simular pequeno delay para melhor UX (opcional - pode remover se quiser instant√¢neo)\r\n    await new Promise(resolve => setTimeout(resolve, 300))\r\n    \r\n    const categoriaKey = categoriaSelect.value\r\n    const especie = especieSelect.value\r\n    const peso = parsePtBrNumber(pesoInput.value)\r\n    const medOption = medicamentoSelect.options[medicamentoSelect.selectedIndex]\r\n    const medData = medOption?.dataset?.medData ? JSON.parse(medOption.dataset.medData) : null\r\n    const med = medicamentoSelect.value\r\n    const conc = parsePtBrNumber(concentracaoInput.value)\r\n    const sens = racaSensivel.checked\r\n    const notas = notasInput ? notasInput.value.trim() : ''\r\n    \r\n    calcular({ \r\n      categoria: categoriaKey,\r\n      especie, \r\n      peso, \r\n      med, \r\n      medData,\r\n      conc, \r\n      sens,\r\n      notas,\r\n      raw: {pesoStr:pesoInput.value, concStr:concentracaoInput.value, categoria: categoriaKey, notas} \r\n    })\r\n    \r\n    // Restaurar bot√£o\r\n    submitBtn.disabled = false\r\n    submitBtn.innerHTML = originalText\r\n  })\r\n}\r\n\r\nfunction renderResultado(view) {\r\n  const panel = document.getElementById('panel')\r\n  const especieLabel = ESPECIES.find(e => e.value === view.especie)?.label || view.especie\r\n  const temFaixa = view.doseMinKg !== view.doseMaxKg\r\n  \r\n  // Anima√ß√£o de entrada\r\n  panel.style.opacity = '0'\r\n  panel.style.transform = 'translateY(10px)'\r\n  \r\n  panel.innerHTML = `\r\n    <button id=\\\"voltar\\\" aria-label=\\\"Voltar para o formul√°rio\\\" class=\\\"-ml-2 inline-flex items-center gap-2 rounded-md px-2 py-1 text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 cursor-pointer bg-transparent hover:bg-gray-100 dark:hover:bg-gray-700 transition\\\"><span>‚Üê</span><span>Voltar</span></button>\r\n    <div class=\\\"mt-3 rounded-xl bg-white dark:bg-gray-800 p-6 shadow-md ring-1 ring-black/5 dark:ring-gray-700\\\">\r\n      <div class=\\\"text-base font-semibold text-gray-900 dark:text-gray-100\\\">Plano de cuidado</div>\r\n      <div class=\\\"mt-2 text-sm text-gray-700 dark:text-gray-300\\\">\r\n        <span class=\\\"font-medium\\\">${especieLabel}</span> ‚Ä¢ <span class=\\\"font-medium\\\">${view.med}</span>\r\n        ${view.peso ? ` ‚Ä¢ <span class=\\\"text-gray-600 dark:text-gray-400\\\">${formatNumber(view.peso)} kg</span>` : ''}\r\n      </div>\r\n      ${view.classe ? `<div class=\\\"mt-1 text-xs text-gray-500 dark:text-gray-400\\\">Classe: ${view.classe}</div>` : ''}\r\n\r\n      <div class=\\\"mt-4\\\">\r\n        <div class=\\\"text-xs text-gray-500 dark:text-gray-400 mb-2\\\">Dosagem de refer√™ncia: ${view.faixaStr}</div>\r\n        ${temFaixa ? `\r\n        <div class=\\\"grid grid-cols-1 sm:grid-cols-3 gap-2 text-center\\\">\r\n          <div class=\\\"rounded-lg bg-red-50 dark:bg-red-900/20 px-2 py-3 border border-red-200 dark:border-red-800 break-words\\\">\r\n            <div class=\\\"text-xs text-red-600 dark:text-red-400 font-medium mb-1\\\">M√≠nimo</div>\r\n            <div class=\\\"text-sm sm:text-base font-bold text-red-700 dark:text-red-300 break-words\\\">${view.doseMinMg} mg</div>\r\n            ${view.isComprimido ? '' : `<div class=\\\"text-xs text-red-600 dark:text-red-400 mt-1 break-words\\\">${view.volumeMinMl} mL</div>`}\r\n            ${view.comprimidosMin !== null ? `<div class=\\\"text-xs text-red-500 dark:text-red-400 mt-1 break-words\\\">${view.comprimidosMin} comprimido(s)</div>` : ''}\r\n          </div>\r\n          <div class=\\\"rounded-lg bg-green-50 dark:bg-green-900/20 px-2 py-3 border-2 border-green-300 dark:border-green-600 break-words\\\">\r\n            <div class=\\\"text-xs text-green-600 dark:text-green-400 font-medium mb-1\\\">Calculado</div>\r\n            <div class=\\\"text-base sm:text-lg font-bold text-green-700 dark:text-green-300 break-words\\\">${view.doseMg} mg</div>\r\n            ${view.isComprimido ? '' : `<div class=\\\"text-xs text-green-600 dark:text-green-400 mt-1 break-words\\\">${view.volumeMl} mL</div>`}\r\n            ${view.comprimidos !== null ? `<div class=\\\"text-xs text-green-500 dark:text-green-400 mt-1 break-words\\\">${view.comprimidos} comprimido(s)</div>` : ''}\r\n          </div>\r\n          <div class=\\\"rounded-lg bg-blue-50 dark:bg-blue-900/20 px-2 py-3 border border-blue-200 dark:border-blue-800 break-words\\\">\r\n            <div class=\\\"text-xs text-blue-600 dark:text-blue-400 font-medium mb-1\\\">M√°ximo</div>\r\n            <div class=\\\"text-sm sm:text-base font-bold text-blue-700 dark:text-blue-300 break-words\\\">${view.doseMaxMg} mg</div>\r\n            ${view.isComprimido ? '' : `<div class=\\\"text-xs text-blue-600 dark:text-blue-400 mt-1 break-words\\\">${view.volumeMaxMl} mL</div>`}\r\n            ${view.comprimidosMax !== null ? `<div class=\\\"text-xs text-blue-500 dark:text-blue-400 mt-1 break-words\\\">${view.comprimidosMax} comprimido(s)</div>` : ''}\r\n          </div>\r\n        </div>\r\n        ` : `\r\n        <div class=\\\"rounded-lg bg-green-50 dark:bg-green-900/20 px-4 py-3 border-2 border-green-300 dark:border-green-600 text-center\\\">\r\n          <div class=\\\"text-xs text-green-600 dark:text-green-400 font-medium mb-1\\\">Dose</div>\r\n          <div class=\\\"text-2xl font-bold text-green-700 dark:text-green-300\\\">${view.doseMg} mg</div>\r\n          ${view.isComprimido ? '' : `<div class=\\\"text-sm text-green-600 dark:text-green-400 mt-1\\\">${view.volumeMl} mL</div>`}\r\n          ${view.comprimidos !== null ? `<div class=\\\"text-xs text-green-500 dark:text-green-400 mt-1\\\">${view.comprimidos} comprimido(s) de ${view.concentracao} mg</div>` : ''}\r\n        </div>\r\n        `}\r\n      </div>\r\n\r\n      <div class=\\\"mt-4 grid grid-cols-1 gap-2 sm:grid-cols-2\\\">\r\n        ${view.concentracao ? `\r\n        <div class=\\\"rounded-lg bg-gray-50 dark:bg-gray-700 px-3 py-2\\\">\r\n          <div class=\\\"text-xs text-gray-500 dark:text-gray-400\\\">Concentra√ß√£o utilizada</div>\r\n          <div class=\\\"font-medium text-gray-900 dark:text-gray-100\\\">${view.concentracao} ${view.isComprimido ? 'mg/comprimido' : 'mg/mL'}</div>\r\n        </div>\r\n        ` : ''}\r\n        ${view.via ? `\r\n        <div class=\\\"rounded-lg bg-gray-50 dark:bg-gray-700 px-3 py-2\\\">\r\n          <div class=\\\"text-xs text-gray-500 dark:text-gray-400\\\">Via de administra√ß√£o</div>\r\n          <div class=\\\"font-medium text-gray-900 dark:text-gray-100\\\">${view.via}</div>\r\n        </div>\r\n        ` : ''}\r\n        <div class=\\\"rounded-lg bg-gray-50 dark:bg-gray-700 px-3 py-2\\\">\r\n          <div class=\\\"text-xs text-gray-500 dark:text-gray-400\\\">Frequ√™ncia</div>\r\n          <div class=\\\"font-medium text-gray-900 dark:text-gray-100\\\">${view.freq}</div>\r\n        </div>\r\n        <div class=\\\"rounded-lg bg-gray-50 dark:bg-gray-700 px-3 py-2\\\">\r\n          <div class=\\\"text-xs text-gray-500 dark:text-gray-400\\\">Dura√ß√£o</div>\r\n          <div class=\\\"font-medium text-gray-900 dark:text-gray-100\\\">${view.dur}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\\\"mt-4 border-t dark:border-gray-700 pt-4 space-y-2\\\">\r\n        ${view.medData?.Concentracao_mg_mL ? `\r\n        <div class=\\\"rounded-lg bg-blue-50 dark:bg-blue-900/20 px-3 py-2 border border-blue-100 dark:border-blue-800\\\">\r\n          <div class=\\\"text-xs text-blue-600 dark:text-blue-400 font-medium mb-1\\\">Concentra√ß√µes dispon√≠veis</div>\r\n          <div class=\\\"text-sm text-blue-700 dark:text-blue-300\\\">${view.medData.Concentracao_mg_mL}</div>\r\n        </div>\r\n        ` : ''}\r\n      </div>\r\n      ${view.alerta ? `<div class=\\\"mt-3 rounded border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/30 px-3 py-2 text-sm text-amber-800 dark:text-amber-300\\\">‚ö†Ô∏è ${view.alerta}</div>` : ''}\r\n      \r\n      ${view.notas ? `<div class=\\\"mt-3 rounded-lg bg-purple-50 dark:bg-purple-900/20 px-3 py-2 border border-purple-200 dark:border-purple-800\\\">\r\n        <div class=\\\"text-xs text-purple-600 dark:text-purple-400 font-medium mb-1\\\">Notas pessoais</div>\r\n        <div class=\\\"text-sm text-purple-700 dark:text-purple-300\\\">${view.notas}</div>\r\n      </div>` : ''}\r\n      \r\n      <div class=\\\"mt-4 flex gap-2 justify-end\\\">\r\n        <button id=\\\"exportarPDF\\\" class=\\\"px-4 py-2 text-sm rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 transition cursor-pointer\\\">üìÑ PDF</button>\r\n        <button id=\\\"imprimir\\\" class=\\\"px-4 py-2 text-sm rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 transition cursor-pointer\\\">üñ®Ô∏è Imprimir</button>\r\n      </div>\r\n    </div>\r\n  `\r\n  \r\n  // Anima√ß√£o de entrada\r\n  requestAnimationFrame(() => {\r\n    panel.style.transition = 'opacity 0.3s ease, transform 0.3s ease'\r\n    panel.style.opacity = '1'\r\n    panel.style.transform = 'translateY(0)'\r\n  })\r\n  \r\n  // Scroll suave para o resultado\r\n  setTimeout(() => {\r\n    panel.scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n  }, 100)\r\n  \r\n  // Bot√£o imprimir\r\n  document.getElementById('imprimir').addEventListener('click', () => {\r\n    window.print()\r\n  })\r\n  \r\n  // Bot√£o exportar PDF\r\n  document.getElementById('exportarPDF').addEventListener('click', () => {\r\n    exportarPDF(view)\r\n  })\r\n  \r\n  document.getElementById('voltar').addEventListener('click', () => {\r\n    renderForm(view.formState)\r\n    // Restaurar categoria e medicamentos\r\n    if (view.formState.categoria) {\r\n      const categoriaSelect = document.getElementById('categoria')\r\n      categoriaSelect.value = view.formState.categoria\r\n      categoriaSelect.dispatchEvent(new Event('change'))\r\n      setTimeout(() => {\r\n        const medicamentoSelect = document.getElementById('medicamento')\r\n        const concentracaoInput = document.getElementById('concentracao')\r\n        if (view.formState.med) {\r\n          medicamentoSelect.value = view.formState.med\r\n          // Disparar evento change para restaurar concentra√ß√£o do JSON se necess√°rio\r\n          medicamentoSelect.dispatchEvent(new Event('change'))\r\n        }\r\n        // Restaurar concentra√ß√£o que estava salva\r\n        if (view.formState.concStr) {\r\n          concentracaoInput.value = view.formState.concStr\r\n        }\r\n      }, 150)\r\n    }\r\n  })\r\n}\r\n\r\nfunction calcular({ categoria, especie, peso, med, medData, conc, sens, raw }) {\r\n  const panel = document.getElementById('panel')\r\n  \r\n  // Limpar mensagens de erro anteriores\r\n  const existingAlerts = panel.querySelectorAll('.alert-error')\r\n  existingAlerts.forEach(alert => alert.remove())\r\n  \r\n  const alertMsg = (msg) => {\r\n    const alertEl = document.createElement('div')\r\n    alertEl.className = 'alert-error mt-4 rounded-md border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/30 px-4 py-3 text-sm text-red-700 dark:text-red-300'\r\n    alertEl.textContent = msg\r\n    panel.insertAdjacentElement('beforeend', alertEl)\r\n    // Scroll suave para o erro\r\n    alertEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' })\r\n  }\r\n\r\n  if (!Number.isFinite(peso)) return alertMsg('Informe um peso v√°lido (n√∫mero).')\r\n  if (peso <= 0) return alertMsg('Peso deve ser maior que zero.')\r\n  if (peso < limitesPesoKg.min) return alertMsg(`Peso muito baixo. M√≠nimo: ${limitesPesoKg.min} kg.`)\r\n  if (peso > limitesPesoKg.max) return alertMsg(`Peso muito alto. M√°ximo: ${limitesPesoKg.max} kg.`)\r\n  if (!categoria) return alertMsg('Selecione uma categoria de medicamento.')\r\n  if (!med) return alertMsg('Selecione um medicamento.')\r\n  \r\n  // Detectar se √© comprimido ANTES de validar concentra√ß√£o\r\n  const concStr = medData?.Concentracao_mg_mL || ''\r\n  let isComprimido = /comprimido|comp|cp|tablet|c√°psula|capsula/i.test(concStr)\r\n  \r\n  // Se n√£o for comprimido, concentra√ß√£o √© obrigat√≥ria\r\n  if (!isComprimido && (!raw.concStr || !Number.isFinite(conc) || conc <= 0)) {\r\n    return alertMsg('Concentra√ß√£o √© obrigat√≥ria. Informe um valor em mg/mL maior que 0.')\r\n  }\r\n  \r\n  // Se for comprimido mas n√£o informou concentra√ß√£o, usar conc = 0 para n√£o calcular volumes/comprimidos\r\n  if (isComprimido && (!raw.concStr || !Number.isFinite(conc) || conc <= 0)) {\r\n    conc = 0 // Ser√° usado apenas para mostrar dose em mg\r\n  }\r\n\r\n  let regra = null\r\n  let medNome = med\r\n\r\n  // Tentar usar dados do JSON primeiro\r\n  if (medData && medData.Dose_mg_kg) {\r\n    const doseParsed = parseDoseFromJSON(medData.Dose_mg_kg, especie)\r\n    if (doseParsed) {\r\n      medNome = medData.Medicamento || med\r\n      regra = {\r\n        min: doseParsed.min,\r\n        max: doseParsed.max,\r\n        freq: medData.Frequencia || 'Conforme prescri√ß√£o',\r\n        dur: 'Conforme prescri√ß√£o',\r\n        obs: medData.Observacoes || medData.Via || ''\r\n      }\r\n    }\r\n  }\r\n\r\n  // Se n√£o encontrou nos JSONs, tentar no DOSAGENS antigo\r\n  if (!regra) {\r\n    regra = getRegra(med, especie)\r\n  }\r\n  \r\n  // Se ainda n√£o encontrou protocolo, usar f√≥rmula padr√£o baseada no tipo de medicamento\r\n  if (!regra) {\r\n    // F√≥rmulas padr√£o conforme infos.md: Dose (mg/kg) √ó Peso (kg) = Quantidade (mg)\r\n    // Para medicamentos sem protocolo, usar uma faixa conservadora gen√©rica\r\n    // Baseado em padr√µes comuns: analg√©sicos opioides geralmente 0,1-2mg/kg, antibi√≥ticos 5-20mg/kg, etc.\r\n    const medLower = med.toLowerCase()\r\n    let dosePadrao = null\r\n    \r\n    // Tentar inferir dose padr√£o baseado no nome ou categoria\r\n    if (medLower.includes('fentanil') || medLower.includes('opioide') || medLower.includes('analg√©sico')) {\r\n      dosePadrao = { min: 0.001, max: 0.005 } // 1-5 mcg/kg convertido para mg (0,001-0,005 mg/kg)\r\n    } else if (medLower.includes('antibi√≥tico') || medLower.includes('amoxicilina') || medLower.includes('cefalexina')) {\r\n      dosePadrao = { min: 10, max: 20 }\r\n    } else if (medLower.includes('anti-inflamat√≥rio') || medLower.includes('carprofeno') || medLower.includes('meloxicam')) {\r\n      dosePadrao = { min: 0.1, max: 0.2 }\r\n    } else if (medLower.includes('diur√©tico') || medLower.includes('furosemida')) {\r\n      dosePadrao = { min: 2, max: 6 }\r\n    } else {\r\n      // Dose gen√©rica conservadora para medicamentos desconhecidos\r\n      dosePadrao = { min: 1, max: 5 }\r\n    }\r\n    \r\n    if (dosePadrao) {\r\n      regra = {\r\n        min: dosePadrao.min,\r\n        max: dosePadrao.max,\r\n        freq: 'Conforme prescri√ß√£o veterin√°ria',\r\n        dur: 'Conforme prescri√ß√£o veterin√°ria',\r\n        obs: '‚ö†Ô∏è Protocolo espec√≠fico n√£o encontrado. Dose calculada com base em f√≥rmula padr√£o do tipo de medicamento. Sempre consulte literatura espec√≠fica ou veterin√°rio antes de administrar.'\r\n      }\r\n    } else {\r\n      return alertMsg('N√£o h√° protocolo cadastrado para esta combina√ß√£o de medicamento e esp√©cie. Consulte literatura espec√≠fica ou veterin√°rio.')\r\n    }\r\n  }\r\n\r\n  // Calcular doses m√≠nima, m√°xima e m√©dia\r\n  const doseMinMg = round2(peso * regra.min)\r\n  const doseMaxMg = round2(peso * regra.max)\r\n  const mgKg = regra.min === regra.max ? regra.min : (regra.min + regra.max) / 2\r\n  const doseMgNum = round2(peso * mgKg) // Dose m√©dia calculada\r\n  \r\n  // Se n√£o detectou como comprimido pelo JSON mas tem concentra√ß√£o alta, pode ser comprimido\r\n  if (!isComprimido && conc > 0) {\r\n    const isComprimidoByValue = (conc >= 50 && conc <= 1000 && !/mg\\s*\\/\\s*\\d+\\s*mL/i.test(concStr))\r\n    if (isComprimidoByValue) {\r\n      isComprimido = true\r\n    }\r\n  }\r\n  \r\n  // Calcular volumes em mL (apenas se tiver concentra√ß√£o e n√£o for comprimido)\r\n  const volumeMinMl = (conc > 0 && !isComprimido) ? round2(doseMinMg / conc) : null\r\n  const volumeMaxMl = (conc > 0 && !isComprimido) ? round2(doseMaxMg / conc) : null\r\n  const volumeMlNum = (conc > 0 && !isComprimido) ? round2(doseMgNum / conc) : null\r\n  \r\n  // Calcular comprimidos conforme infos.md: dose (mg) √∑ mg por comprimido = comprimidos\r\n  // Arredondar para 1 casa decimal, permitindo meios comprimidos (0,5)\r\n  // S√≥ calcula se for comprimido E tiver concentra√ß√£o informada\r\n  const comprimidosMin = (isComprimido && conc > 0) ? round2(doseMinMg / conc) : null\r\n  const comprimidosMax = (isComprimido && conc > 0) ? round2(doseMaxMg / conc) : null\r\n  const comprimidos = (isComprimido && conc > 0) ? round2(doseMgNum / conc) : null\r\n\r\n  const faixaStr = regra.min === regra.max ? `${regra.min} mg/kg` : `${regra.min}‚Äì${regra.max} mg/kg`\r\n  const alerta = (med.includes('ivermectina') && especie === 'cachorro' && sens)\r\n    ? 'Aten√ß√£o: Ivermectina pode ser contraindicada em ra√ßas sens√≠veis (MDR1).'\r\n    : ''\r\n\r\n  renderResultado({\r\n    especie,\r\n    med: medNome,\r\n    peso: peso,\r\n    doseMinMg: formatNumber(doseMinMg),\r\n    doseMaxMg: formatNumber(doseMaxMg),\r\n    doseMg: formatNumber(doseMgNum),\r\n    volumeMinMl: volumeMinMl !== null ? formatNumber(volumeMinMl) : null,\r\n    volumeMaxMl: volumeMaxMl !== null ? formatNumber(volumeMaxMl) : null,\r\n    volumeMl: volumeMlNum !== null ? formatNumber(volumeMlNum) : null,\r\n    concentracao: conc > 0 ? formatNumber(conc) : null,\r\n    comprimidosMin: (isComprimido && comprimidosMin !== null) ? formatNumber(comprimidosMin) : null,\r\n    comprimidosMax: (isComprimido && comprimidosMax !== null) ? formatNumber(comprimidosMax) : null,\r\n    comprimidos: (isComprimido && comprimidos !== null) ? formatNumber(comprimidos) : null,\r\n    isComprimido: isComprimido,\r\n    via: medData?.Via || '',\r\n    freq: regra.freq,\r\n    dur: regra.dur,\r\n    faixaStr,\r\n    doseMinKg: regra.min,\r\n    doseMaxKg: regra.max,\r\n    obs: regra.obs,\r\n    alerta,\r\n    medData: medData || null,\r\n    classe: medData?.Classe || '',\r\n    notas: raw.notas || '',\r\n    formState: { especie, pesoStr: raw.pesoStr, categoria: raw.categoria, med, concStr: raw.concStr, sensivel: sens, notas: raw.notas || '' },\r\n  })\r\n  \r\n  // Salvar no hist√≥rico\r\n  salvarHistorico({\r\n    especie,\r\n    med: medNome,\r\n    peso,\r\n    doseMg: doseMgNum,\r\n    doseMinMg,\r\n    doseMaxMg,\r\n    volumeMl: volumeMlNum,\r\n    concentracao: conc,\r\n    categoria,\r\n    notas: raw.notas || ''\r\n  })\r\n}\r\n\r\n// Inicializa view\r\nrenderForm()\r\n\r\n\r\n"],"names":["logoUrl","CATEGORIAS","analgesicosOpioides","antiHistaminico","antiInflamatorio","antiarritmicos","antibioticos","anticonvulsivantes","antiemeticos","antifungicos","antiparasitarios","antiulcerosos","corticoesteroides","diureticos","laxantesAntigases","outros","sistemaRespiratorio","vasodilatadores","vasopressores","vitaminas","app","aplicarTema","temaSalvo","html","alternarTema","atualizarIconeTema","temaIcon","isDark","toggleTema","novoBtn","btn","e","historicoBtn","mostrarHistorico","historico","getHistorico","panel","renderForm","item","idx","data","especieLabel","ESPECIES","formatNumber","limparHistorico","el","splashEl","DOSAGENS","limitesPesoKg","CONCENTRACOES_PADRAO","round2","n","getRegra","medicamento","especie","mapa","parseDoseFromJSON","doseStr","especieTerms","converterUnidade","valor","unidade","term","especieRegex","especieMatch","parteEspecie","faixaRegex","faixaMatch","min","max","singleRegex","singleMatch","val","valorConvertido","multiRegex","multiMatch","values","regex","match","getFavoritos","salvarFavorito","categoria","favoritos","key","removerFavorito","index","isFavorito","salvarHistorico","calculo","historicoLimitado","exportarPDF","view","temFaixa","win","initial","pesoStr","med","concStr","sensivel","notas","categoriasOptions","cat","s","form","categoriaSelect","especieSelect","pesoInput","medicamentoSelect","buscaMedicamento","medicamentoLista","toggleFavoritos","concentracaoInput","racaSensivel","notasInput","alertBox","mostrarApenasFavoritos","medicamentosAtuais","extrairConcentracao","mg","ml","compRegex","compMatch","isLiquido","via","v","getConcentracoesPadrao","nomeMed","nomeLower","valores","atualizarMedicamentos","categoriaKey","categoriaAnterior","medItem","nome","value","f","buscarMedicamentos","termo","medicamentosFiltrados","termoLower","medicamentosFavoritos","medicamentosNaoFavoritos","a","b","medicamentosOrdenados","favorito","div","medValue","medicamentoAnterior","medOption","opcoesContainer","medAtual","tinhaConcSalva","mesmoMedicamento","medData","concExtraida","concPadrao","buttonsContainer","conc","resetBtn","maskDecimal","int","dec","intFmt","maskTwoDecimals","format","digits","intPart","decPart","handler","parsePtBrNumber","str","submitBtn","originalText","resolve","peso","sens","calcular","renderResultado","raw","alert","alertMsg","msg","alertEl","isComprimido","regra","medNome","doseParsed","medLower","dosePadrao","doseMinMg","doseMaxMg","mgKg","doseMgNum","volumeMinMl","volumeMaxMl","volumeMlNum","comprimidosMin","comprimidosMax","comprimidos","faixaStr","alerta"],"mappings":"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"}